#####  jvm 运行时的内存划分

- 内存划分可以总结为两类，一类是储存数据的部分 包括 方法区和heap(堆) 另一类是指令区  包含程序计数器 本地方法栈 虚拟机栈

  - 指令区（线程独有）

    - 程序计数器

      程序计数器的主要作用是记录当前线程所执行的字节码的行号 用于获取下一条应该执行的字节码 这样做的原因是因为 cpu在执行指令的过程中是在不同的线程之间切换的 ，这就势必会造成线程的等待执行，所在需要程序计数器记录当前线程执行自己码的行号，以便在获得CPU资源时得以继续执行

    - 虚拟机栈（一个方法在虚拟机栈里对应一个栈帧）

      - 局部变量表
        - 局部变量表是存储局部变量值的一个区域，定长为32
      - 操作数栈
        - 操作数栈即操作数据的栈 数据计算的栈 
      - 动态链接
        - 存放引用方法
      - 返回地址
        - 方法的返回地址

    - 本地方法栈 存放native 方法

  - 数据区（共享）

    - 方法区

      存放 静态变量、常量 、成员变量, JIT（just in time）

    - heap（堆）

      存放实例化对象

#####  内存回收

- <1.8 新生代 老年代 永久代
- 1.8之后 新生代 老年代  metaspace(原信息)

- 定位回收算法
  - 引用计数法
    - 每少一个引用 引用数-1 直到减到0以后被回收，循环依赖的情况下 例如 a对象持有b对象的引用，同时b对象又持有a对象的引用 这种情况下会造成两个对象都无法被回收。
  - 可达性分析
    - GCRoot
      - 

- 内存回收算法
  - 标记删除(会产生内存碎片)
  - 标记整理
  - 复制（内存利用率低，对象多时 效率较低）
  - 分代算法(新生代复制、老年代标记整理或者标记清楚)
- 内存回收日志





